import sys
import time
from pentester_client import Client

def execute(primaryUrl, scenarioId):
	client = Client(primaryUrl, scenarioId)

	print "Connecting to pentest dashboard"
	res = client.runScanner()
	print res

	print "Getting running status"
	stat = client.getRunningStatus()
	print stat

	print "Getting results"
	while True:
		result = client.getResults()
		if (result != "null"):
			print result
			break
		time.sleep(3)

def main():
	argv = sys.argv
	if (len(argv) < 2):
		print "Program terminated!"
		print "Usage: client.py [dashboard url] [scenario ID]"
		sys.exit()
	else:
		# Set up initial variables
		primaryUrl = argv[1]
		scenarioId = argv[2]
		
		execute(primaryUrl, scenarioId)
	
if __name__ == "__main__":
	main()